     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_sprintf
     7 00000000                                 	EXTERN	_io_hlt
     8 00000000                                 	EXTERN	_load_gdtr
     9 00000000                                 	EXTERN	_load_idtr
    10 00000000                                 	EXTERN	_hankaku
    11 00000000                                 	EXTERN	_io_load_eflags
    12 00000000                                 	EXTERN	_io_cli
    13 00000000                                 	EXTERN	_io_out8
    14 00000000                                 	EXTERN	_io_store_eflags
    15 00000000                                 [FILE "bootpack.c"]
    16                                          [SECTION .data]
    17 00000000                                 LC0:
    18 00000000 28 25 64 2C 25 64 29 00         	DB	"(%d,%d)",0x00
    19                                          [SECTION .text]
    20 00000000                                 	GLOBAL	_HariMain
    21 00000000                                 _HariMain:
    22 00000000 55                              	PUSH	EBP
    23 00000001 89 E5                           	MOV	EBP,ESP
    24 00000003 57                              	PUSH	EDI
    25 00000004 56                              	PUSH	ESI
    26 00000005 53                              	PUSH	EBX
    27 00000006 8D 9D FFFFFEC4                  	LEA	EBX,DWORD [-316+EBP]
    28 0000000C 81 EC 00000130                  	SUB	ESP,304
    29 00000012 E8 000000A2                     	CALL	_init_gdtidt
    30 00000017 E8 00000510                     	CALL	_init_palette
    31 0000001C 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
    32 00000023 50                              	PUSH	EAX
    33 00000024 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    34 0000002B 50                              	PUSH	EAX
    35 0000002C FF 35 00000FF8                  	PUSH	DWORD [4088]
    36 00000032 E8 00000319                     	CALL	_init_screen
    37 00000037 B9 00000002                     	MOV	ECX,2
    38 0000003C 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    39 00000043 8D 50 F0                        	LEA	EDX,DWORD [-16+EAX]
    40 00000046 89 D0                           	MOV	EAX,EDX
    41 00000048 99                              	CDQ
    42 00000049 F7 F9                           	IDIV	ECX
    43 0000004B 0F BF 15 00000FF6               	MOVSX	EDX,WORD [4086]
    44 00000052 83 EA 2C                        	SUB	EDX,44
    45 00000055 89 C7                           	MOV	EDI,EAX
    46 00000057 89 D0                           	MOV	EAX,EDX
    47 00000059 6A 0E                           	PUSH	14
    48 0000005B 99                              	CDQ
    49 0000005C F7 F9                           	IDIV	ECX
    50 0000005E 53                              	PUSH	EBX
    51 0000005F 89 C6                           	MOV	ESI,EAX
    52 00000061 E8 000001B8                     	CALL	_init_mouse_cursor8
    53 00000066 6A 10                           	PUSH	16
    54 00000068 53                              	PUSH	EBX
    55 00000069 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
    56 0000006C 56                              	PUSH	ESI
    57 0000006D 57                              	PUSH	EDI
    58 0000006E 6A 10                           	PUSH	16
    59 00000070 6A 10                           	PUSH	16
    60 00000072 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    61 00000079 50                              	PUSH	EAX
    62 0000007A FF 35 00000FF8                  	PUSH	DWORD [4088]
    63 00000080 E8 00000143                     	CALL	_putblock8_8
    64 00000085 83 C4 34                        	ADD	ESP,52
    65 00000088 56                              	PUSH	ESI
    66 00000089 57                              	PUSH	EDI
    67 0000008A 68 [00000000]                   	PUSH	LC0
    68 0000008F 53                              	PUSH	EBX
    69 00000090 E8 [00000000]                   	CALL	_sprintf
    70 00000095 53                              	PUSH	EBX
    71 00000096 6A 07                           	PUSH	7
    72 00000098 6A 00                           	PUSH	0
    73 0000009A 6A 00                           	PUSH	0
    74 0000009C 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    75 000000A3 50                              	PUSH	EAX
    76 000000A4 FF 35 00000FF8                  	PUSH	DWORD [4088]
    77 000000AA E8 000001CC                     	CALL	_putfonts8_asc
    78 000000AF 83 C4 28                        	ADD	ESP,40
    79 000000B2                                 L2:
    80 000000B2 E8 [00000000]                   	CALL	_io_hlt
    81 000000B7 EB F9                           	JMP	L2
    82 000000B9                                 	GLOBAL	_init_gdtidt
    83 000000B9                                 _init_gdtidt:
    84 000000B9 55                              	PUSH	EBP
    85 000000BA 89 E5                           	MOV	EBP,ESP
    86 000000BC 56                              	PUSH	ESI
    87 000000BD 53                              	PUSH	EBX
    88 000000BE BE 00270000                     	MOV	ESI,2555904
    89 000000C3 BB 00001FFF                     	MOV	EBX,8191
    90 000000C8                                 L10:
    91 000000C8 6A 00                           	PUSH	0
    92 000000CA 6A 00                           	PUSH	0
    93 000000CC 6A 00                           	PUSH	0
    94 000000CE 56                              	PUSH	ESI
    95 000000CF 83 C6 08                        	ADD	ESI,8
    96 000000D2 E8 0000007B                     	CALL	_set_segmdesc
    97 000000D7 83 C4 10                        	ADD	ESP,16
    98 000000DA 4B                              	DEC	EBX
    99 000000DB 79 EB                           	JNS	L10
   100 000000DD 68 00004092                     	PUSH	16530
   101 000000E2 BE 0026F800                     	MOV	ESI,2553856
   102 000000E7 6A 00                           	PUSH	0
   103 000000E9 BB 000000FF                     	MOV	EBX,255
   104 000000EE 6A FF                           	PUSH	-1
   105 000000F0 68 00270008                     	PUSH	2555912
   106 000000F5 E8 00000058                     	CALL	_set_segmdesc
   107 000000FA 68 0000409A                     	PUSH	16538
   108 000000FF 68 00280000                     	PUSH	2621440
   109 00000104 68 0007FFFF                     	PUSH	524287
   110 00000109 68 00270010                     	PUSH	2555920
   111 0000010E E8 0000003F                     	CALL	_set_segmdesc
   112 00000113 83 C4 20                        	ADD	ESP,32
   113 00000116 68 02700000                     	PUSH	40894464
   114 0000011B 68 0000FFFF                     	PUSH	65535
   115 00000120 E8 [00000000]                   	CALL	_load_gdtr
   116 00000125 58                              	POP	EAX
   117 00000126 5A                              	POP	EDX
   118 00000127                                 L15:
   119 00000127 6A 00                           	PUSH	0
   120 00000129 6A 00                           	PUSH	0
   121 0000012B 6A 00                           	PUSH	0
   122 0000012D 56                              	PUSH	ESI
   123 0000012E 83 C6 08                        	ADD	ESI,8
   124 00000131 E8 00000066                     	CALL	_set_gatedesc
   125 00000136 83 C4 10                        	ADD	ESP,16
   126 00000139 4B                              	DEC	EBX
   127 0000013A 79 EB                           	JNS	L15
   128 0000013C 68 0026F800                     	PUSH	2553856
   129 00000141 68 000007FF                     	PUSH	2047
   130 00000146 E8 [00000000]                   	CALL	_load_idtr
   131 0000014B 8D 65 F8                        	LEA	ESP,DWORD [-8+EBP]
   132 0000014E 5B                              	POP	EBX
   133 0000014F 5E                              	POP	ESI
   134 00000150 5D                              	POP	EBP
   135 00000151 C3                              	RET
   136 00000152                                 	GLOBAL	_set_segmdesc
   137 00000152                                 _set_segmdesc:
   138 00000152 55                              	PUSH	EBP
   139 00000153 89 E5                           	MOV	EBP,ESP
   140 00000155 53                              	PUSH	EBX
   141 00000156 8B 55 0C                        	MOV	EDX,DWORD [12+EBP]
   142 00000159 8B 4D 10                        	MOV	ECX,DWORD [16+EBP]
   143 0000015C 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   144 0000015F 8B 45 14                        	MOV	EAX,DWORD [20+EBP]
   145 00000162 81 FA 000FFFFF                  	CMP	EDX,1048575
   146 00000168 76 08                           	JBE	L21
   147 0000016A C1 EA 0C                        	SHR	EDX,12
   148 0000016D 0D 00008000                     	OR	EAX,32768
   149 00000172                                 L21:
   150 00000172 66 89 13                        	MOV	WORD [EBX],DX
   151 00000175 88 43 05                        	MOV	BYTE [5+EBX],AL
   152 00000178 C1 EA 10                        	SHR	EDX,16
   153 0000017B C1 F8 08                        	SAR	EAX,8
   154 0000017E 83 E2 0F                        	AND	EDX,15
   155 00000181 66 89 4B 02                     	MOV	WORD [2+EBX],CX
   156 00000185 83 E0 F0                        	AND	EAX,-16
   157 00000188 C1 F9 10                        	SAR	ECX,16
   158 0000018B 09 C2                           	OR	EDX,EAX
   159 0000018D 88 4B 04                        	MOV	BYTE [4+EBX],CL
   160 00000190 88 53 06                        	MOV	BYTE [6+EBX],DL
   161 00000193 C1 F9 08                        	SAR	ECX,8
   162 00000196 88 4B 07                        	MOV	BYTE [7+EBX],CL
   163 00000199 5B                              	POP	EBX
   164 0000019A 5D                              	POP	EBP
   165 0000019B C3                              	RET
   166 0000019C                                 	GLOBAL	_set_gatedesc
   167 0000019C                                 _set_gatedesc:
   168 0000019C 55                              	PUSH	EBP
   169 0000019D 89 E5                           	MOV	EBP,ESP
   170 0000019F 53                              	PUSH	EBX
   171 000001A0 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   172 000001A3 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   173 000001A6 8B 5D 14                        	MOV	EBX,DWORD [20+EBP]
   174 000001A9 8B 4D 0C                        	MOV	ECX,DWORD [12+EBP]
   175 000001AC 66 89 42 02                     	MOV	WORD [2+EDX],AX
   176 000001B0 88 5A 05                        	MOV	BYTE [5+EDX],BL
   177 000001B3 66 89 0A                        	MOV	WORD [EDX],CX
   178 000001B6 89 D8                           	MOV	EAX,EBX
   179 000001B8 C1 F8 08                        	SAR	EAX,8
   180 000001BB C1 F9 10                        	SAR	ECX,16
   181 000001BE 88 42 04                        	MOV	BYTE [4+EDX],AL
   182 000001C1 66 89 4A 06                     	MOV	WORD [6+EDX],CX
   183 000001C5 5B                              	POP	EBX
   184 000001C6 5D                              	POP	EBP
   185 000001C7 C3                              	RET
   186 000001C8                                 	GLOBAL	_putblock8_8
   187 000001C8                                 _putblock8_8:
   188 000001C8 55                              	PUSH	EBP
   189 000001C9 89 E5                           	MOV	EBP,ESP
   190 000001CB 57                              	PUSH	EDI
   191 000001CC 56                              	PUSH	ESI
   192 000001CD 31 F6                           	XOR	ESI,ESI
   193 000001CF 53                              	PUSH	EBX
   194 000001D0 83 EC 0C                        	SUB	ESP,12
   195 000001D3 3B 75 14                        	CMP	ESI,DWORD [20+EBP]
   196 000001D6 7D 3E                           	JGE	L35
   197 000001D8 31 FF                           	XOR	EDI,EDI
   198 000001DA                                 L33:
   199 000001DA 31 DB                           	XOR	EBX,EBX
   200 000001DC 3B 5D 10                        	CMP	EBX,DWORD [16+EBP]
   201 000001DF 7D 2C                           	JGE	L37
   202 000001E1 8B 45 20                        	MOV	EAX,DWORD [32+EBP]
   203 000001E4 01 F8                           	ADD	EAX,EDI
   204 000001E6 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   205 000001E9                                 L32:
   206 000001E9 8B 45 1C                        	MOV	EAX,DWORD [28+EBP]
   207 000001EC 8B 55 18                        	MOV	EDX,DWORD [24+EBP]
   208 000001EF 01 F0                           	ADD	EAX,ESI
   209 000001F1 01 DA                           	ADD	EDX,EBX
   210 000001F3 0F AF 45 0C                     	IMUL	EAX,DWORD [12+EBP]
   211 000001F7 01 D0                           	ADD	EAX,EDX
   212 000001F9 8B 4D 08                        	MOV	ECX,DWORD [8+EBP]
   213 000001FC 8B 55 EC                        	MOV	EDX,DWORD [-20+EBP]
   214 000001FF 43                              	INC	EBX
   215 00000200 8A 12                           	MOV	DL,BYTE [EDX]
   216 00000202 88 14 08                        	MOV	BYTE [EAX+ECX*1],DL
   217 00000205 FF 45 EC                        	INC	DWORD [-20+EBP]
   218 00000208 3B 5D 10                        	CMP	EBX,DWORD [16+EBP]
   219 0000020B 7C DC                           	JL	L32
   220 0000020D                                 L37:
   221 0000020D 46                              	INC	ESI
   222 0000020E 03 7D 24                        	ADD	EDI,DWORD [36+EBP]
   223 00000211 3B 75 14                        	CMP	ESI,DWORD [20+EBP]
   224 00000214 7C C4                           	JL	L33
   225 00000216                                 L35:
   226 00000216 83 C4 0C                        	ADD	ESP,12
   227 00000219 5B                              	POP	EBX
   228 0000021A 5E                              	POP	ESI
   229 0000021B 5F                              	POP	EDI
   230 0000021C 5D                              	POP	EBP
   231 0000021D C3                              	RET
   232                                          [SECTION .data]
   233 00000008                                 _cursor.0:
   234 00000008 2A 2A 2A 2A 2A 2A 2A 2A 2A 2A   	DB	"**************.."
       00000012 2A 2A 2A 2A 2E 2E 
   235 00000018 2A 4F 4F 4F 4F 4F 4F 4F 4F 4F   	DB	"*OOOOOOOOOOO*..."
       00000022 4F 4F 2A 2E 2E 2E 
   236 00000028 2A 4F 4F 4F 4F 4F 4F 4F 4F 4F   	DB	"*OOOOOOOOOO*...."
       00000032 4F 2A 2E 2E 2E 2E 
   237 00000038 2A 4F 4F 4F 4F 4F 4F 4F 4F 4F   	DB	"*OOOOOOOOO*....."
       00000042 2A 2E 2E 2E 2E 2E 
   238 00000048 2A 4F 4F 4F 4F 4F 4F 4F 4F 2A   	DB	"*OOOOOOOO*......"
       00000052 2E 2E 2E 2E 2E 2E 
   239 00000058 2A 4F 4F 4F 4F 4F 4F 4F 2A 2E   	DB	"*OOOOOOO*......."
       00000062 2E 2E 2E 2E 2E 2E 
   240 00000068 2A 4F 4F 4F 4F 4F 4F 4F 2A 2E   	DB	"*OOOOOOO*......."
       00000072 2E 2E 2E 2E 2E 2E 
   241 00000078 2A 4F 4F 4F 4F 4F 4F 4F 4F 2A   	DB	"*OOOOOOOO*......"
       00000082 2E 2E 2E 2E 2E 2E 
   242 00000088 2A 4F 4F 4F 4F 2A 2A 4F 4F 4F   	DB	"*OOOO**OOO*....."
       00000092 2A 2E 2E 2E 2E 2E 
   243 00000098 2A 4F 4F 4F 2A 2E 2E 2A 4F 4F   	DB	"*OOO*..*OOO*...."
       000000A2 4F 2A 2E 2E 2E 2E 
   244 000000A8 2A 4F 4F 2A 2E 2E 2E 2E 2A 4F   	DB	"*OO*....*OOO*..."
       000000B2 4F 4F 2A 2E 2E 2E 
   245 000000B8 2A 4F 2A 2E 2E 2E 2E 2E 2E 2A   	DB	"*O*......*OOO*.."
       000000C2 4F 4F 4F 2A 2E 2E 
   246 000000C8 2A 2A 2E 2E 2E 2E 2E 2E 2E 2E   	DB	"**........*OOO*."
       000000D2 2A 4F 4F 4F 2A 2E 
   247 000000D8 2A 2E 2E 2E 2E 2E 2E 2E 2E 2E   	DB	"*..........*OOO*"
       000000E2 2E 2A 4F 4F 4F 2A 
   248 000000E8 2E 2E 2E 2E 2E 2E 2E 2E 2E 2E   	DB	"............*OO*"
       000000F2 2E 2E 2A 4F 4F 2A 
   249 000000F8 2E 2E 2E 2E 2E 2E 2E 2E 2E 2E   	DB	".............***"
       00000102 2E 2E 2E 2A 2A 2A 
   250                                          [SECTION .text]
   251 0000021E                                 	GLOBAL	_init_mouse_cursor8
   252 0000021E                                 _init_mouse_cursor8:
   253 0000021E 55                              	PUSH	EBP
   254 0000021F 89 E5                           	MOV	EBP,ESP
   255 00000221 57                              	PUSH	EDI
   256 00000222 56                              	PUSH	ESI
   257 00000223 31 FF                           	XOR	EDI,EDI
   258 00000225 53                              	PUSH	EBX
   259 00000226 53                              	PUSH	EBX
   260 00000227 31 DB                           	XOR	EBX,EBX
   261 00000229 8A 45 0C                        	MOV	AL,BYTE [12+EBP]
   262 0000022C 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   263 0000022F 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   264 00000232                                 L51:
   265 00000232 31 D2                           	XOR	EDX,EDX
   266 00000234                                 L50:
   267 00000234 8D 04 3A                        	LEA	EAX,DWORD [EDX+EDI*1]
   268 00000237 80 B8 [00000008] 2A             	CMP	BYTE [_cursor.0+EAX],42
   269 0000023E 74 35                           	JE	L56
   270 00000240                                 L47:
   271 00000240 80 B8 [00000008] 4F             	CMP	BYTE [_cursor.0+EAX],79
   272 00000247 74 26                           	JE	L57
   273 00000249                                 L48:
   274 00000249 80 B8 [00000008] 2E             	CMP	BYTE [_cursor.0+EAX],46
   275 00000250 74 15                           	JE	L58
   276 00000252                                 L45:
   277 00000252 42                              	INC	EDX
   278 00000253 83 FA 0F                        	CMP	EDX,15
   279 00000256 7E DC                           	JLE	L50
   280 00000258 43                              	INC	EBX
   281 00000259 83 C7 10                        	ADD	EDI,16
   282 0000025C 83 FB 0F                        	CMP	EBX,15
   283 0000025F 7E D1                           	JLE	L51
   284 00000261 59                              	POP	ECX
   285 00000262 5B                              	POP	EBX
   286 00000263 5E                              	POP	ESI
   287 00000264 5F                              	POP	EDI
   288 00000265 5D                              	POP	EBP
   289 00000266 C3                              	RET
   290 00000267                                 L58:
   291 00000267 8A 4D F3                        	MOV	CL,BYTE [-13+EBP]
   292 0000026A 88 0C 30                        	MOV	BYTE [EAX+ESI*1],CL
   293 0000026D EB E3                           	JMP	L45
   294 0000026F                                 L57:
   295 0000026F C6 04 30 07                     	MOV	BYTE [EAX+ESI*1],7
   296 00000273 EB D4                           	JMP	L48
   297 00000275                                 L56:
   298 00000275 C6 04 30 00                     	MOV	BYTE [EAX+ESI*1],0
   299 00000279 EB C5                           	JMP	L47
   300 0000027B                                 	GLOBAL	_putfonts8_asc
   301 0000027B                                 _putfonts8_asc:
   302 0000027B 55                              	PUSH	EBP
   303 0000027C 89 E5                           	MOV	EBP,ESP
   304 0000027E 57                              	PUSH	EDI
   305 0000027F 56                              	PUSH	ESI
   306 00000280 53                              	PUSH	EBX
   307 00000281 56                              	PUSH	ESI
   308 00000282 8B 5D 1C                        	MOV	EBX,DWORD [28+EBP]
   309 00000285 8A 45 18                        	MOV	AL,BYTE [24+EBP]
   310 00000288 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   311 0000028B 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   312 0000028E 8B 7D 14                        	MOV	EDI,DWORD [20+EBP]
   313 00000291 80 3B 00                        	CMP	BYTE [EBX],0
   314 00000294 75 08                           	JNE	L64
   315 00000296                                 L66:
   316 00000296 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   317 00000299 5B                              	POP	EBX
   318 0000029A 5E                              	POP	ESI
   319 0000029B 5F                              	POP	EDI
   320 0000029C 5D                              	POP	EBP
   321 0000029D C3                              	RET
   322 0000029E                                 L64:
   323 0000029E 0F B6 03                        	MOVZX	EAX,BYTE [EBX]
   324 000002A1 C1 E0 04                        	SAL	EAX,4
   325 000002A4 43                              	INC	EBX
   326 000002A5 05 [00000000]                   	ADD	EAX,_hankaku
   327 000002AA 50                              	PUSH	EAX
   328 000002AB 0F BE 45 F3                     	MOVSX	EAX,BYTE [-13+EBP]
   329 000002AF 50                              	PUSH	EAX
   330 000002B0 57                              	PUSH	EDI
   331 000002B1 56                              	PUSH	ESI
   332 000002B2 83 C6 08                        	ADD	ESI,8
   333 000002B5 FF 75 0C                        	PUSH	DWORD [12+EBP]
   334 000002B8 FF 75 08                        	PUSH	DWORD [8+EBP]
   335 000002BB E8 0000000A                     	CALL	_putfont8
   336 000002C0 83 C4 18                        	ADD	ESP,24
   337 000002C3 80 3B 00                        	CMP	BYTE [EBX],0
   338 000002C6 75 D6                           	JNE	L64
   339 000002C8 EB CC                           	JMP	L66
   340 000002CA                                 	GLOBAL	_putfont8
   341 000002CA                                 _putfont8:
   342 000002CA 55                              	PUSH	EBP
   343 000002CB 89 E5                           	MOV	EBP,ESP
   344 000002CD 57                              	PUSH	EDI
   345 000002CE 56                              	PUSH	ESI
   346 000002CF 31 F6                           	XOR	ESI,ESI
   347 000002D1 53                              	PUSH	EBX
   348 000002D2 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   349 000002D5 8A 5D 18                        	MOV	BL,BYTE [24+EBP]
   350 000002D8                                 L80:
   351 000002D8 8B 45 14                        	MOV	EAX,DWORD [20+EBP]
   352 000002DB 8B 55 10                        	MOV	EDX,DWORD [16+EBP]
   353 000002DE 01 F0                           	ADD	EAX,ESI
   354 000002E0 0F AF 45 0C                     	IMUL	EAX,DWORD [12+EBP]
   355 000002E4 03 45 08                        	ADD	EAX,DWORD [8+EBP]
   356 000002E7 8D 0C 02                        	LEA	ECX,DWORD [EDX+EAX*1]
   357 000002EA 8A 14 3E                        	MOV	DL,BYTE [ESI+EDI*1]
   358 000002ED 84 D2                           	TEST	DL,DL
   359 000002EF 79 02                           	JNS	L72
   360 000002F1 88 19                           	MOV	BYTE [ECX],BL
   361 000002F3                                 L72:
   362 000002F3 88 D0                           	MOV	AL,DL
   363 000002F5 83 E0 40                        	AND	EAX,64
   364 000002F8 84 C0                           	TEST	AL,AL
   365 000002FA 74 03                           	JE	L73
   366 000002FC 88 59 01                        	MOV	BYTE [1+ECX],BL
   367 000002FF                                 L73:
   368 000002FF 88 D0                           	MOV	AL,DL
   369 00000301 83 E0 20                        	AND	EAX,32
   370 00000304 84 C0                           	TEST	AL,AL
   371 00000306 74 03                           	JE	L74
   372 00000308 88 59 02                        	MOV	BYTE [2+ECX],BL
   373 0000030B                                 L74:
   374 0000030B 88 D0                           	MOV	AL,DL
   375 0000030D 83 E0 10                        	AND	EAX,16
   376 00000310 84 C0                           	TEST	AL,AL
   377 00000312 74 03                           	JE	L75
   378 00000314 88 59 03                        	MOV	BYTE [3+ECX],BL
   379 00000317                                 L75:
   380 00000317 88 D0                           	MOV	AL,DL
   381 00000319 83 E0 08                        	AND	EAX,8
   382 0000031C 84 C0                           	TEST	AL,AL
   383 0000031E 74 03                           	JE	L76
   384 00000320 88 59 04                        	MOV	BYTE [4+ECX],BL
   385 00000323                                 L76:
   386 00000323 88 D0                           	MOV	AL,DL
   387 00000325 83 E0 04                        	AND	EAX,4
   388 00000328 84 C0                           	TEST	AL,AL
   389 0000032A 74 03                           	JE	L77
   390 0000032C 88 59 05                        	MOV	BYTE [5+ECX],BL
   391 0000032F                                 L77:
   392 0000032F 88 D0                           	MOV	AL,DL
   393 00000331 83 E0 02                        	AND	EAX,2
   394 00000334 84 C0                           	TEST	AL,AL
   395 00000336 74 03                           	JE	L78
   396 00000338 88 59 06                        	MOV	BYTE [6+ECX],BL
   397 0000033B                                 L78:
   398 0000033B 83 E2 01                        	AND	EDX,1
   399 0000033E 84 D2                           	TEST	DL,DL
   400 00000340 74 03                           	JE	L70
   401 00000342 88 59 07                        	MOV	BYTE [7+ECX],BL
   402 00000345                                 L70:
   403 00000345 46                              	INC	ESI
   404 00000346 83 FE 0F                        	CMP	ESI,15
   405 00000349 7E 8D                           	JLE	L80
   406 0000034B 5B                              	POP	EBX
   407 0000034C 5E                              	POP	ESI
   408 0000034D 5F                              	POP	EDI
   409 0000034E 5D                              	POP	EBP
   410 0000034F C3                              	RET
   411 00000350                                 	GLOBAL	_init_screen
   412 00000350                                 _init_screen:
   413 00000350 55                              	PUSH	EBP
   414 00000351 89 E5                           	MOV	EBP,ESP
   415 00000353 57                              	PUSH	EDI
   416 00000354 56                              	PUSH	ESI
   417 00000355 53                              	PUSH	EBX
   418 00000356 83 EC 0C                        	SUB	ESP,12
   419 00000359 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   420 0000035C 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   421 0000035F 83 E8 1D                        	SUB	EAX,29
   422 00000362 4F                              	DEC	EDI
   423 00000363 50                              	PUSH	EAX
   424 00000364 57                              	PUSH	EDI
   425 00000365 6A 00                           	PUSH	0
   426 00000367 6A 00                           	PUSH	0
   427 00000369 6A 0E                           	PUSH	14
   428 0000036B FF 75 0C                        	PUSH	DWORD [12+EBP]
   429 0000036E FF 75 08                        	PUSH	DWORD [8+EBP]
   430 00000371 E8 00000165                     	CALL	_boxfill8
   431 00000376 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   432 00000379 83 E8 1C                        	SUB	EAX,28
   433 0000037C 50                              	PUSH	EAX
   434 0000037D 57                              	PUSH	EDI
   435 0000037E 50                              	PUSH	EAX
   436 0000037F 6A 00                           	PUSH	0
   437 00000381 6A 08                           	PUSH	8
   438 00000383 FF 75 0C                        	PUSH	DWORD [12+EBP]
   439 00000386 FF 75 08                        	PUSH	DWORD [8+EBP]
   440 00000389 E8 0000014D                     	CALL	_boxfill8
   441 0000038E 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   442 00000391 83 C4 38                        	ADD	ESP,56
   443 00000394 83 E8 1B                        	SUB	EAX,27
   444 00000397 50                              	PUSH	EAX
   445 00000398 57                              	PUSH	EDI
   446 00000399 50                              	PUSH	EAX
   447 0000039A 6A 00                           	PUSH	0
   448 0000039C 6A 07                           	PUSH	7
   449 0000039E FF 75 0C                        	PUSH	DWORD [12+EBP]
   450 000003A1 FF 75 08                        	PUSH	DWORD [8+EBP]
   451 000003A4 E8 00000132                     	CALL	_boxfill8
   452 000003A9 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   453 000003AC 48                              	DEC	EAX
   454 000003AD 50                              	PUSH	EAX
   455 000003AE 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   456 000003B1 57                              	PUSH	EDI
   457 000003B2 83 E8 1A                        	SUB	EAX,26
   458 000003B5 50                              	PUSH	EAX
   459 000003B6 6A 00                           	PUSH	0
   460 000003B8 6A 08                           	PUSH	8
   461 000003BA FF 75 0C                        	PUSH	DWORD [12+EBP]
   462 000003BD FF 75 08                        	PUSH	DWORD [8+EBP]
   463 000003C0 E8 00000116                     	CALL	_boxfill8
   464 000003C5 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   465 000003C8 83 C4 38                        	ADD	ESP,56
   466 000003CB 83 EE 18                        	SUB	ESI,24
   467 000003CE 56                              	PUSH	ESI
   468 000003CF 6A 3B                           	PUSH	59
   469 000003D1 56                              	PUSH	ESI
   470 000003D2 6A 03                           	PUSH	3
   471 000003D4 6A 07                           	PUSH	7
   472 000003D6 FF 75 0C                        	PUSH	DWORD [12+EBP]
   473 000003D9 FF 75 08                        	PUSH	DWORD [8+EBP]
   474 000003DC E8 000000FA                     	CALL	_boxfill8
   475 000003E1 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   476 000003E4 83 E8 04                        	SUB	EAX,4
   477 000003E7 50                              	PUSH	EAX
   478 000003E8 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   479 000003EB 6A 02                           	PUSH	2
   480 000003ED 56                              	PUSH	ESI
   481 000003EE 6A 02                           	PUSH	2
   482 000003F0 6A 07                           	PUSH	7
   483 000003F2 FF 75 0C                        	PUSH	DWORD [12+EBP]
   484 000003F5 FF 75 08                        	PUSH	DWORD [8+EBP]
   485 000003F8 E8 000000DE                     	CALL	_boxfill8
   486 000003FD 83 C4 38                        	ADD	ESP,56
   487 00000400 FF 75 F0                        	PUSH	DWORD [-16+EBP]
   488 00000403 6A 3B                           	PUSH	59
   489 00000405 FF 75 F0                        	PUSH	DWORD [-16+EBP]
   490 00000408 6A 03                           	PUSH	3
   491 0000040A 6A 0F                           	PUSH	15
   492 0000040C FF 75 0C                        	PUSH	DWORD [12+EBP]
   493 0000040F FF 75 08                        	PUSH	DWORD [8+EBP]
   494 00000412 E8 000000C4                     	CALL	_boxfill8
   495 00000417 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   496 0000041A 83 E8 05                        	SUB	EAX,5
   497 0000041D 50                              	PUSH	EAX
   498 0000041E 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   499 00000421 6A 3B                           	PUSH	59
   500 00000423 83 E8 17                        	SUB	EAX,23
   501 00000426 50                              	PUSH	EAX
   502 00000427 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   503 0000042A 6A 3B                           	PUSH	59
   504 0000042C 6A 0F                           	PUSH	15
   505 0000042E FF 75 0C                        	PUSH	DWORD [12+EBP]
   506 00000431 FF 75 08                        	PUSH	DWORD [8+EBP]
   507 00000434 E8 000000A2                     	CALL	_boxfill8
   508 00000439 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   509 0000043C 83 C4 38                        	ADD	ESP,56
   510 0000043F 83 E8 03                        	SUB	EAX,3
   511 00000442 89 45 E8                        	MOV	DWORD [-24+EBP],EAX
   512 00000445 50                              	PUSH	EAX
   513 00000446 6A 3B                           	PUSH	59
   514 00000448 50                              	PUSH	EAX
   515 00000449 6A 02                           	PUSH	2
   516 0000044B 6A 00                           	PUSH	0
   517 0000044D FF 75 0C                        	PUSH	DWORD [12+EBP]
   518 00000450 FF 75 08                        	PUSH	DWORD [8+EBP]
   519 00000453 E8 00000083                     	CALL	_boxfill8
   520 00000458 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   521 0000045B 6A 3C                           	PUSH	60
   522 0000045D 56                              	PUSH	ESI
   523 0000045E 6A 3C                           	PUSH	60
   524 00000460 6A 00                           	PUSH	0
   525 00000462 FF 75 0C                        	PUSH	DWORD [12+EBP]
   526 00000465 FF 75 08                        	PUSH	DWORD [8+EBP]
   527 00000468 E8 0000006E                     	CALL	_boxfill8
   528 0000046D 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   529 00000470 83 C4 38                        	ADD	ESP,56
   530 00000473 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   531 00000476 83 EB 04                        	SUB	EBX,4
   532 00000479 83 EF 2F                        	SUB	EDI,47
   533 0000047C 56                              	PUSH	ESI
   534 0000047D 53                              	PUSH	EBX
   535 0000047E 56                              	PUSH	ESI
   536 0000047F 57                              	PUSH	EDI
   537 00000480 6A 0F                           	PUSH	15
   538 00000482 FF 75 0C                        	PUSH	DWORD [12+EBP]
   539 00000485 FF 75 08                        	PUSH	DWORD [8+EBP]
   540 00000488 E8 0000004E                     	CALL	_boxfill8
   541 0000048D FF 75 F0                        	PUSH	DWORD [-16+EBP]
   542 00000490 57                              	PUSH	EDI
   543 00000491 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   544 00000494 57                              	PUSH	EDI
   545 00000495 6A 0F                           	PUSH	15
   546 00000497 FF 75 0C                        	PUSH	DWORD [12+EBP]
   547 0000049A FF 75 08                        	PUSH	DWORD [8+EBP]
   548 0000049D E8 00000039                     	CALL	_boxfill8
   549 000004A2 83 C4 38                        	ADD	ESP,56
   550 000004A5 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   551 000004A8 53                              	PUSH	EBX
   552 000004A9 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   553 000004AC 57                              	PUSH	EDI
   554 000004AD 6A 07                           	PUSH	7
   555 000004AF FF 75 0C                        	PUSH	DWORD [12+EBP]
   556 000004B2 FF 75 08                        	PUSH	DWORD [8+EBP]
   557 000004B5 E8 00000021                     	CALL	_boxfill8
   558 000004BA 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   559 000004BD FF 75 E8                        	PUSH	DWORD [-24+EBP]
   560 000004C0 83 E8 03                        	SUB	EAX,3
   561 000004C3 50                              	PUSH	EAX
   562 000004C4 56                              	PUSH	ESI
   563 000004C5 50                              	PUSH	EAX
   564 000004C6 6A 07                           	PUSH	7
   565 000004C8 FF 75 0C                        	PUSH	DWORD [12+EBP]
   566 000004CB FF 75 08                        	PUSH	DWORD [8+EBP]
   567 000004CE E8 00000008                     	CALL	_boxfill8
   568 000004D3 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   569 000004D6 5B                              	POP	EBX
   570 000004D7 5E                              	POP	ESI
   571 000004D8 5F                              	POP	EDI
   572 000004D9 5D                              	POP	EBP
   573 000004DA C3                              	RET
   574 000004DB                                 	GLOBAL	_boxfill8
   575 000004DB                                 _boxfill8:
   576 000004DB 55                              	PUSH	EBP
   577 000004DC 89 E5                           	MOV	EBP,ESP
   578 000004DE 57                              	PUSH	EDI
   579 000004DF 56                              	PUSH	ESI
   580 000004E0 53                              	PUSH	EBX
   581 000004E1 50                              	PUSH	EAX
   582 000004E2 50                              	PUSH	EAX
   583 000004E3 8A 45 10                        	MOV	AL,BYTE [16+EBP]
   584 000004E6 8B 4D 18                        	MOV	ECX,DWORD [24+EBP]
   585 000004E9 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   586 000004EC 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   587 000004EF 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   588 000004F2 7F 31                           	JG	L96
   589 000004F4 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   590 000004F7 0F AF D9                        	IMUL	EBX,ECX
   591 000004FA                                 L94:
   592 000004FA 8B 55 14                        	MOV	EDX,DWORD [20+EBP]
   593 000004FD 39 FA                           	CMP	EDX,EDI
   594 000004FF 7F 1B                           	JG	L98
   595 00000501 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   596 00000504 01 DE                           	ADD	ESI,EBX
   597 00000506 01 D6                           	ADD	ESI,EDX
   598 00000508 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   599 0000050B                                 L93:
   600 0000050B 8B 75 EC                        	MOV	ESI,DWORD [-20+EBP]
   601 0000050E 8A 45 F3                        	MOV	AL,BYTE [-13+EBP]
   602 00000511 42                              	INC	EDX
   603 00000512 88 06                           	MOV	BYTE [ESI],AL
   604 00000514 46                              	INC	ESI
   605 00000515 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   606 00000518 39 FA                           	CMP	EDX,EDI
   607 0000051A 7E EF                           	JLE	L93
   608 0000051C                                 L98:
   609 0000051C 41                              	INC	ECX
   610 0000051D 03 5D 0C                        	ADD	EBX,DWORD [12+EBP]
   611 00000520 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   612 00000523 7E D5                           	JLE	L94
   613 00000525                                 L96:
   614 00000525 5F                              	POP	EDI
   615 00000526 58                              	POP	EAX
   616 00000527 5B                              	POP	EBX
   617 00000528 5E                              	POP	ESI
   618 00000529 5F                              	POP	EDI
   619 0000052A 5D                              	POP	EBP
   620 0000052B C3                              	RET
   621                                          [SECTION .data]
   622 00000108                                 _table_rgb.1:
   623 00000108 00                              	DB	0
   624 00000109 00                              	DB	0
   625 0000010A 00                              	DB	0
   626 0000010B FF                              	DB	-1
   627 0000010C 00                              	DB	0
   628 0000010D 00                              	DB	0
   629 0000010E 00                              	DB	0
   630 0000010F FF                              	DB	-1
   631 00000110 00                              	DB	0
   632 00000111 FF                              	DB	-1
   633 00000112 FF                              	DB	-1
   634 00000113 00                              	DB	0
   635 00000114 00                              	DB	0
   636 00000115 00                              	DB	0
   637 00000116 FF                              	DB	-1
   638 00000117 FF                              	DB	-1
   639 00000118 00                              	DB	0
   640 00000119 FF                              	DB	-1
   641 0000011A 00                              	DB	0
   642 0000011B FF                              	DB	-1
   643 0000011C FF                              	DB	-1
   644 0000011D FF                              	DB	-1
   645 0000011E FF                              	DB	-1
   646 0000011F FF                              	DB	-1
   647 00000120 C6                              	DB	-58
   648 00000121 C6                              	DB	-58
   649 00000122 C6                              	DB	-58
   650 00000123 84                              	DB	-124
   651 00000124 00                              	DB	0
   652 00000125 00                              	DB	0
   653 00000126 00                              	DB	0
   654 00000127 84                              	DB	-124
   655 00000128 00                              	DB	0
   656 00000129 84                              	DB	-124
   657 0000012A 84                              	DB	-124
   658 0000012B 00                              	DB	0
   659 0000012C 00                              	DB	0
   660 0000012D 00                              	DB	0
   661 0000012E 84                              	DB	-124
   662 0000012F 84                              	DB	-124
   663 00000130 00                              	DB	0
   664 00000131 84                              	DB	-124
   665 00000132 00                              	DB	0
   666 00000133 84                              	DB	-124
   667 00000134 84                              	DB	-124
   668 00000135 84                              	DB	-124
   669 00000136 84                              	DB	-124
   670 00000137 84                              	DB	-124
   671                                          [SECTION .text]
   672 0000052C                                 	GLOBAL	_init_palette
   673 0000052C                                 _init_palette:
   674 0000052C 55                              	PUSH	EBP
   675 0000052D 89 E5                           	MOV	EBP,ESP
   676 0000052F 68 [00000108]                   	PUSH	_table_rgb.1
   677 00000534 6A 0F                           	PUSH	15
   678 00000536 6A 00                           	PUSH	0
   679 00000538 E8 00000002                     	CALL	_set_palette
   680 0000053D C9                              	LEAVE
   681 0000053E C3                              	RET
   682 0000053F                                 	GLOBAL	_set_palette
   683 0000053F                                 _set_palette:
   684 0000053F 55                              	PUSH	EBP
   685 00000540 89 E5                           	MOV	EBP,ESP
   686 00000542 57                              	PUSH	EDI
   687 00000543 56                              	PUSH	ESI
   688 00000544 53                              	PUSH	EBX
   689 00000545 51                              	PUSH	ECX
   690 00000546 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   691 00000549 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   692 0000054C 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   693 0000054F E8 [00000000]                   	CALL	_io_load_eflags
   694 00000554 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   695 00000557 E8 [00000000]                   	CALL	_io_cli
   696 0000055C 53                              	PUSH	EBX
   697 0000055D 68 000003C8                     	PUSH	968
   698 00000562 E8 [00000000]                   	CALL	_io_out8
   699 00000567 39 FB                           	CMP	EBX,EDI
   700 00000569 58                              	POP	EAX
   701 0000056A 5A                              	POP	EDX
   702 0000056B 7E 12                           	JLE	L105
   703 0000056D                                 L107:
   704 0000056D 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   705 00000570 89 45 08                        	MOV	DWORD [8+EBP],EAX
   706 00000573 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   707 00000576 5B                              	POP	EBX
   708 00000577 5E                              	POP	ESI
   709 00000578 5F                              	POP	EDI
   710 00000579 5D                              	POP	EBP
   711 0000057A E9 [00000000]                   	JMP	_io_store_eflags
   712 0000057F                                 L105:
   713 0000057F 8A 06                           	MOV	AL,BYTE [ESI]
   714 00000581 43                              	INC	EBX
   715 00000582 C0 E8 02                        	SHR	AL,2
   716 00000585 0F B6 C0                        	MOVZX	EAX,AL
   717 00000588 50                              	PUSH	EAX
   718 00000589 68 000003C9                     	PUSH	969
   719 0000058E E8 [00000000]                   	CALL	_io_out8
   720 00000593 8A 46 01                        	MOV	AL,BYTE [1+ESI]
   721 00000596 C0 E8 02                        	SHR	AL,2
   722 00000599 0F B6 C0                        	MOVZX	EAX,AL
   723 0000059C 50                              	PUSH	EAX
   724 0000059D 68 000003C9                     	PUSH	969
   725 000005A2 E8 [00000000]                   	CALL	_io_out8
   726 000005A7 8A 46 02                        	MOV	AL,BYTE [2+ESI]
   727 000005AA C0 E8 02                        	SHR	AL,2
   728 000005AD 83 C6 03                        	ADD	ESI,3
   729 000005B0 0F B6 C0                        	MOVZX	EAX,AL
   730 000005B3 50                              	PUSH	EAX
   731 000005B4 68 000003C9                     	PUSH	969
   732 000005B9 E8 [00000000]                   	CALL	_io_out8
   733 000005BE 83 C4 18                        	ADD	ESP,24
   734 000005C1 39 FB                           	CMP	EBX,EDI
   735 000005C3 7E BA                           	JLE	L105
   736 000005C5 EB A6                           	JMP	L107
